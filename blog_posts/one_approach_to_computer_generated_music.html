<!DOCTYPE HTML>
<!--
	Editorial by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<!-- List of used Codetags:
	 	- TODO
	 	- Q
 -->
<html>
	<head>
		<title>One Approach to Computer Generated Music</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="../assets/css/main.css" />
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Main -->
					<div id="main">
						<div class="inner">

							<!-- Header -->
								<header id="header">
									<ul class="icons">
										<li><a href="https://www.linkedin.com/in/omerbaddour/" class="icon brands fa-linkedin"><span class="label">LinkedIn</span></a></li>
										<li><a href="https://github.com/OmerBaddour" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
										<li><a href="https://twitter.com/omerbaddour" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
									</ul>
								</header>

							<!-- Content -->
								<section>
									<header class="main">
										<h1>One Approach to Computer Generated Music</h1> <!-- TODO: add level 1 indicator -->
									</header>

									<span class="image main"><img src="../images/robot_playing_piano.jpg" alt="Robot playing piano" /></span>

									<p>
										Music is an expression of emotion, shared with its listeners through skilled usage of instruments, both internal and external to the body. Music can also be defined as a sequence of frequencies through time. Computers tend to prefer this second definition.
									</p>
									<p>
										Algorithmic composition is the usage of algorithms to generate music. Consider the following algorithm:
										<ol>
											<li>Sample \(n\) integers from a discrete uniform distribution on the interval \([0, 11]\)</li>
											<li>Map each integer to each frequency in the <a href="https://en.wikipedia.org/wiki/12_equal_temperament">twelve-tone equal temperament scale</a> with a base of <a href="https://en.wikipedia.org/wiki/C_(musical_note)#Middle_C">Middle C</a>, so \(0\) maps to \(261.6265\ Hz\), \(1\) maps to \(277.1826\ Hz\), <a href="https://en.wikipedia.org/wiki/Piano_key_frequencies#List">etc.</a></li>
											<li>Generate a sound file which consists of the \(n\) frequencies played consecutively for \(0.5\) seconds each</li>
										</ol>
										This algorithm is non-deterministic, so can be repeatedly executed to produce novel music! Nonetheless, this algorithm sucks, because its output will tend to sound terrible to humans. Fortunately, music theory offers great tools for describing a structure that sounds good to humans. So, we should be able to greatly improve the algorithm by incorporating some music theoretic ideas.
									</p>
									<p>
										The <a href="https://hal.inria.fr/hal-01257155/document">paper of focus</a> defines the following architecture for musical composition:<br><br>
										<img class="image" src="../images/composition_sequence_and_related_models.png" alt="Composition sequence and related models" width="100%"/><br><br>
										Each model nicely maps to a computable task. Thus, the collective computable tasks form an algorithm for composition. Although all three models are vital for the production of a pleasing piece, I find the <i>Progression Generator</i> to be by far the most interesting. Consequently, I will dive deep into the <i>Progression Generator</i>, and provide brief commentary and analysis on the <i>Rhythms Generator</i> and <i>Notes Assigner</i>.
									</p>
									<hr class="major" />
									<p>
										Let us begin by defining and discussing some musical terms:
										<ul>
											<li>A <a href="https://en.wikipedia.org/wiki/Musical_tone"><i>tone</i></a> is a steady periodic sound, and is characterized by its duration, pitch (or frequency), intensity (or loudness), and timbre (or quality)
											<li>A <a href="https://en.wikipedia.org/wiki/Phrase_(music)"><i>phrase</i></a> is a sequence of related tones</li>
											<li>A <a href="https://en.wikipedia.org/wiki/Chord_(music)"><i>chord</i></a> is a set of multiple tones sounding simultaneously</li>
											<li>A <a href="https://en.wikipedia.org/wiki/Chord_progression"><i>chord progression</i></a> is a sequence of chords</li>
											<li>A <a href="https://en.wikipedia.org/wiki/Scale_(music)"><i>scale</i></a> is a sequence of successive tones within a one-octave range [The Complete Idiot’s Guide to Music Theory, pg 27]</li>
											<li>An <a href="https://en.wikipedia.org/wiki/Octave"><i>octave</i></a> is the interval between one musical tone and another with double its frequency</li>
											<li><a href="https://en.wikipedia.org/wiki/Tonality"><i>Tonality</i></a> is the arrangement of tones and/or chords in a hierarchy of perceived relations</li>
											<ul style="margin-bottom: 0">
												<li>The perceived relations can be best understood with tones and with respect to a specific scale</li>
												<li>
													For example, the <i>C major scale</i> consists of <i>C, D, E, F, G, A, B,</i> a subset of seven of the <a href="https://en.wikipedia.org/wiki/12_equal_temperament">twelve-equal temperament</a> tones <br><br>
													<img class="image" src="../images/c_major_scale_and_degree_names.png" alt="C major scale represented with music notation and degree names" width="100%"/><br><br>
													<audio controls style="margin: auto; display: block;" src="https://upload.wikimedia.org/wikipedia/commons/7/72/C_major.ogg">C major scale. Your browser does not support the audio element.</audio><br>
													(The seven notes are played in ascending order with respect to frequency, the <i>C</i> one octave higher than the base <i>C</i> is played, then the notes are played in descending order)<br><br>
												</li>
												<li>
													Seven tones per octave make up every scale. The first tone in every scale is called the tonic, the second the supertonic, <a href="https://en.wikipedia.org/wiki/Degree_(music)#Scale_degree_names">etc.</a> These names describe the perceived relations between the tones. Numbering these tones relative to the tonic makes them <a href="https://en.wikipedia.org/wiki/Degree_(music)"><i>degrees</i></a>
												</li>
											</ul>
											<li><a href="https://en.wikipedia.org/wiki/Modulation_(music)"><i>Modulation</i></a> is the process of changing from one tonality to another (i.e. moving tonics from <i>C</i> to <i>G</i>)</li>
											<li>An <a href="https://en.wikipedia.org/wiki/Anacrusis"><i>anacrusis</i></a> is a note or sequence of notes which preceeds the first beat of a musical phrase</li>
										</ul>
									</p>
									<p>
										The <i>Progression Generator</i> generates a chord progression. “The cornerstone of harmony is the progression underneath the musical content, this is the main structure and foundation of the song. It can be represented by a string of sequential chords over time. Each chord is a degree used in the tonality of the musical phrase” [source https://hal.inria.fr/hal-01257155/document, page 7]. The authors define an intriguing generative model for chord progressions: a stochastic context-free grammar, also known as a <a href="https://en.wikipedia.org/wiki/Probabilistic_context-free_grammar">probabilistic context-free grammar (PCFG)</a>.
									</p>
									<p>
										Loosely, a <a href="https://en.wikipedia.org/wiki/Context-free_grammar">context-free grammar (CFG)</a> is a set of rules and symbols that defines a language. Formally, a CFG is a \(4\)-tuple \(G = (V, \Sigma, R, S)\), where:
										<ol>
											<li>\(V\) is a finite set; each element \(v \in V\) is a <i>non-terminal character</i> or <i>variable</i></li>
											<li>\(\Sigma\) is a finite set of <i>terminal</i>s, disjoint from \(V\), and is the alphabet of the language defined by the grammar \(G\)</li>
											<li>\(R\) is a finite <a href="https://en.wikipedia.org/wiki/Binary_relation">relation</a> in \( V \times (V \cup \Sigma )^{*}\), where the asterisk represents the <a href="https://en.wikipedia.org/wiki/Kleene_star">Kleene star</a> operation. The members of \(R\) are the <i>production rule</i>s of the grammar</li>
											<li>\(S\)</span> is the start <i>variable</i> used to represent the whole sentence. \(S \in V\)</li>
										</ol>
										Production rules in can be denoted by:
										<div style="text-align: center">\(A \rightarrow E\)</div>
										where \(A \in V,\;E \in V \cup \Sigma\)
									</p>
									<p>
										Loosely, a PCFG is a CFG with probabilities attached to each rule. Formally, a PCFG is a \(5\)-tuple \(G = (V, \Sigma, R, S, P)\), where:
										<ol>
											<li>\(V, \Sigma, R\) and \(S\) are defined above</li>
											<li>\(P\) is a function mapping the set \(R\) to the set \([0, 1]\), such that:
												<div style="text-align: center">\(\sum\limits_{E \in X}{P(A \rightarrow E) = 1}\)</div>
												\(\forall A \in V\), where \(X = V \cup \Sigma\)</li>
										</ol>
										Production rules in can be denoted by:
										<div style="text-align: center">\(A \rightarrow E\qquad\qquad[p_i]\)</div>
										where \(A \in V,\;E \in V \cup \Sigma,\;p_i = P(A \rightarrow E)\)
									</p>
									<p>
										The paper provides a nice example of a PCFG:
										<ul>
											<li>\(V = \{S, C\}\)</li>
											<li>\(\Sigma = \{\)heads, tails\(\}\)</li>
											<li>\(R, P = \{\)
												<ul style="list-style-type: none">
													<li>\(\qquad\qquad S \rightarrow C C\qquad\qquad\quad\,[1.0],\)</li>
													<li>\(\qquad\qquad C \rightarrow\) heads\(\qquad\qquad\;[0.5],\)</li>
													<li>\(\qquad\qquad C \rightarrow\) tails \(\qquad\qquad\;\;\;[0.5],\)</li>
												\(\qquad\;\;\}\)</ul>
											</li>
										</ul>
										Note that by generating a string with this PCFG, one simulates two fair coin tosses!
									</p>
									<p>
										And now, we are ready to see the PCFG provided in the paper:
										<ul style="margin-bottom: 0">
											<li>\(\Sigma = \{i, ii, iii, iv, v, vi, viidis, v7\}\), where each of the first seven elements \((i,\,..., viidis)\) map to each degree (tonic, supertonic, mediant, subdominant, dominant, submediant, subtonic), and \((v7)\) maps to the dominant seventh chord</li>
											<li>Production rules and probabilities with annotations:<br><br>
												Start:
												<ul style="list-style-type: none">
													<li>\(S' \rightarrow A\;S\;F\qquad\qquad\quad\,[0.3]\qquad\) # Suggestion</li>
													<li>\(\quad\,\rightarrow S\;F\qquad\qquad\qquad\,[0.7]\)</li>
												</ul>
											</li>
										</ul>
										<ul style="list-style-type: none">
											<li>
												Anacrusis:
												<ul style="list-style-type: none">
													<li>\(A \rightarrow ana \;v\qquad\qquad\quad\;\,[0.7]\qquad\) # Anacrusis</li>
													<li>\(\quad\,\rightarrow ana \;i\qquad\qquad\quad\;\,[0.3]\)</li>
												</ul>
											</li>
											<li>
												Phrases:
												<ul style="list-style-type: none">
													<li>\(S \rightarrow T\;S_1\;D\;T\;S\qquad\;\;[0.35]\qquad\) # Basic Phrases</li>
													<li>\(\quad\,\rightarrow T\;D\;T\;S\qquad\quad\;\;[0.25]\qquad\) #</li><br>
													<li>\(\quad\,\rightarrow T\;M\;D\;T\;S\qquad\;[0.07]\qquad\) # Arpeggios</li>
													<li>\(\quad\,\rightarrow T\;S_1\;S_2\;T\;S\qquad\;[0.07]\qquad\) #</li><br>
													<li>\(\quad\,\rightarrow S_1\;T\;D\;T\;S\qquad\:\,[0.07]\qquad\) # No Tonic Start</li>
													<li>\(\quad\,\rightarrow D\;T\;S_1\;T\;S\qquad\:\,[0.07]\qquad\) #</li><br>
													<li>\(\quad\,\rightarrow T\;S_1\;T\;S\qquad\quad\,\,\,[0.02]\qquad\) # Misc</li>
													<li>\(\quad\,\rightarrow T\;S_1\;D\;S_2\;T\;S\quad\,[0.02]\qquad\) #</li>
													<li>\(\quad\,\rightarrow T\;M\;S_1\;D\;T\;S\;\;\;\;[0.02]\qquad\) #</li><br>
													<li>\(\quad\,\rightarrow MOD\qquad\qquad\;\;\,[0.06]\qquad\) # Modulation</li>
												</ul>
											</li>
											<li>
												Degree functions:
												<ul style="list-style-type: none">
													<li>\(T \rightarrow i\qquad\qquad\qquad\quad\;\:\,[0.8]\qquad\) # Tonic</li>
													<li>\(\quad\,\rightarrow iii\qquad\qquad\qquad\;\;\;[0.1]\qquad\) #</li>
													<li>\(\quad\,\rightarrow vi\qquad\qquad\qquad\quad[0.1]\qquad\) #</li><br>
													<li>\(S_1 \rightarrow iv\qquad\qquad\qquad\;\:\:\,[0.7]\qquad\) # Subdominant</li>
													<li>\(\quad\,\rightarrow ii\qquad\qquad\qquad\;\;\;\;[0.2]\qquad\) #</li>
													<li>\(\quad\,\rightarrow vi\qquad\qquad\qquad\;\;\;\,[0.1]\qquad\) #</li><br>
													<li>\(D \rightarrow v\qquad\qquad\qquad\quad\:\,[0.4]\qquad\) # Dominant</li>
													<li>\(\quad\,\rightarrow v7\qquad\qquad\qquad\;\;\;[0.3]\qquad\) #</li>
													<li>\(\quad\,\rightarrow viidis\qquad\qquad\quad\;[0.2]\qquad\) #</li>
													<li>\(\quad\,\rightarrow iii\qquad\qquad\qquad\;\;\:[0.1]\qquad\) #</li><br>
													<li>\(M \rightarrow iii\qquad\qquad\qquad\;\,\,[1.0]\qquad\) # Mediant</li><br>
													<li>\(S_2 \rightarrow vi\qquad\qquad\qquad\;\;\;[1.0]\qquad\) # Submediant</li><br>
												</ul>
											</li>
												End:
												<ul style="list-style-type: none">
													<li>\(F \rightarrow T\;D\;T\qquad\qquad\quad\;\,[0.7]\qquad\) # End Suggestion</li>
													<li>\(\quad\,\rightarrow T\;S_1\;T\qquad\qquad\quad\,[0.3]\)</li>
												</ul>
											</li>
										</ul>
									</p>
									<p>Take a moment to marvel in its glory.</p>
									<p>
										Some things to note:
										<ul>
											<li>This is not the full grammar. The full grammar is too long to fit in the paper; above is actually a subset of the grammar for major tonalities (there is actually a whole other grammar for minor tonalities)</li>
											<li>The above is not a formal definition of the grammar; the authors did not provide one. I believe the form they provided the grammar in is more readable, and don’t believe that a formal definition would add much value, hence I decided to replicate the provided representation</li>
											<li>The grammar reflects the harmonic basis of the genre that the authors wished to model (e.g. ending the song in the tonic degree)</li>
											<li>The authors assigned probabilities to each rule based on a deep study of J.S. Bach pieces</li>
										</ul>
									</p>

									<hr class="major" />

									<h2>Citations</h2>

								</section>

						</div>
					</div>

				<!-- Sidebar -->
					<div id="sidebar">
						<div class="inner">

							<!-- Search -->
								<section id="search" class="alt">
									<form method="post" action="#">
										<input type="text" name="query" id="query" placeholder="Search" />
									</form>
								</section>

							<!-- Menu -->
								<nav id="menu">
									<header class="major">
										<h2>Menu</h2>
									</header>
									<ul>
										<li><a href="../index.html">Homepage</a></li>
										<li><a href="../generic.html">Generic</a></li>
										<li><a href="../elements.html">Elements</a></li>
										<li>
											<span class="opener">Submenu</span>
											<ul>
												<li><a href="#">Lorem Dolor</a></li>
												<li><a href="#">Ipsum Adipiscing</a></li>
												<li><a href="#">Tempus Magna</a></li>
												<li><a href="#">Feugiat Veroeros</a></li>
											</ul>
										</li>
										<li><a href="#">Etiam Dolore</a></li>
										<li><a href="#">Adipiscing</a></li>
										<li>
											<span class="opener">Another Submenu</span>
											<ul>
												<li><a href="#">Lorem Dolor</a></li>
												<li><a href="#">Ipsum Adipiscing</a></li>
												<li><a href="#">Tempus Magna</a></li>
												<li><a href="#">Feugiat Veroeros</a></li>
											</ul>
										</li>
										<li><a href="#">Maximus Erat</a></li>
										<li><a href="#">Sapien Mauris</a></li>
										<li><a href="#">Amet Lacinia</a></li>
									</ul>
								</nav>

							<!-- Section -->
								<section>
									<header class="major">
										<h2>Ante interdum</h2>
									</header>
									<div class="mini-posts">
										<article>
											<a href="#" class="image"><img src="../images/pic07.jpg" alt="" /></a>
											<p>Aenean ornare velit lacus, ac varius enim lorem ullamcorper dolore aliquam.</p>
										</article>
										<article>
											<a href="#" class="image"><img src="../images/pic08.jpg" alt="" /></a>
											<p>Aenean ornare velit lacus, ac varius enim lorem ullamcorper dolore aliquam.</p>
										</article>
										<article>
											<a href="#" class="image"><img src="../images/pic09.jpg" alt="" /></a>
											<p>Aenean ornare velit lacus, ac varius enim lorem ullamcorper dolore aliquam.</p>
										</article>
									</div>
									<ul class="actions">
										<li><a href="#" class="button">More</a></li>
									</ul>
								</section>

							<!-- Section -->
								<section>
									<header class="major">
										<h2>Get in touch</h2>
									</header>
									<p>Sed varius enim lorem ullamcorper dolore aliquam aenean ornare velit lacus, ac varius enim lorem ullamcorper dolore. Proin sed aliquam facilisis ante interdum. Sed nulla amet lorem feugiat tempus aliquam.</p>
									<ul class="contact">
										<li class="icon solid fa-envelope"><a href="#">information@untitled.tld</a></li>
										<li class="icon solid fa-phone">(000) 000-0000</li>
										<li class="icon solid fa-home">1234 Somewhere Road #8254<br />
										Nashville, TN 00000-0000</li>
									</ul>
								</section>

							<!-- Footer -->
								<footer id="footer">
									<p class="copyright">&copy; Untitled. All rights reserved. Demo Images: <a href="https://unsplash.com">Unsplash</a>. Design: <a href="https://html5up.net">HTML5 UP</a>.</p>
								</footer>

						</div>
					</div>

			</div>

		<!-- Scripts -->
			<script src="../assets/js/jquery.min.js"></script>
			<script src="../assets/js/browser.min.js"></script>
			<script src="../assets/js/breakpoints.min.js"></script>
			<script src="../assets/js/util.js"></script>
			<script src="../assets/js/main.js"></script>
			<script id="MathJax-script" async="false" src="../assets/mathjax/tex-chtml.js"></script>

	</body>
</html>